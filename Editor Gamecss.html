<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Estilo do Campo de Jogo</title>
    <link rel="stylesheet" href="./css/card.css">
    <style>
        /* Estilos base para o editor e a simulação do jogo */
        :root {
            --cor-borda-painel: #a48042;
            --cor-destaque: #ffd700;
            --cor-painel: rgba(20,20,20,0.85);
            --cor-painel-transparente: rgba(20,20,20,0.7);
            --cor-borda-painel-transparente: rgba(84,68,33,0.6);

            /* Variáveis que serão controladas pelo editor */
            --field-card-width: 68px;
            --field-card-height: 95px; 
            --lado-jogador-gap: 5px;
            --lado-jogador-max-width: 450px;
            --mao-height: 100px;
            --mao-card-width: 60px;
            --mao-card-margin: -25px;
            --mao-jogador-y: 0px;
            --mao-oponente-y: 0px;
            --stats-font-size: 1em;
            --field-scale: 0.9;
            --field-gap: 5px;
            --field-padding-vertical: 10px;
            --field-padding-horizontal: 10px;
            --field-border-radius: 12px;
            --field-width: auto;
            --field-height: auto;
            --tabuleiro-oponente-y: 0px;
            --area-conflito-y: 0px;
            --tabuleiro-jogador-y: 0px;
        }
        
        body { 
            font-family: sans-serif; 
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); 
            color: #f0f0f0; 
            margin: 0; 
            overflow: hidden; 
        }

        /* Estrutura principal replicada do game.css */
        .game-screen-editor {
            display: grid; 
            grid-template-areas: "left-panel main-field right-panel"; 
            grid-template-columns: clamp(300px, 20vw, 400px) minmax(0, 1fr) clamp(300px, 20vw, 400px); 
            grid-template-rows: 100%; 
            width: 100vw; 
            height: 100vh; 
            padding: 10px; 
            gap: 10px;
            box-sizing: border-box;
        }

        /* Painéis laterais que agora contêm os controles */
        .game-ui-panel {
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
            padding: 15px; 
            background: var(--cor-painel); 
            border: 2px solid var(--cor-borda-painel); 
            border-radius: 12px; 
            height: 100%;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .left-panel { grid-area: left-panel; }
        .right-panel { grid-area: right-panel; }

        /* Controles do Editor */
        .control-group h3 { margin-top: 0; color: var(--cor-destaque); border-bottom: 1px solid var(--cor-borda-painel); padding-bottom: 5px; font-size: 1.1em; }
        .control { margin-bottom: 12px; }
        .control label { display: block; margin-bottom: 5px; font-size: 0.9em; }
        .control-inline { display: flex; justify-content: space-between; align-items: center; }
        .control-inline label { flex-grow: 1; }
        .control input[type="range"] { width: 100%; }
        .control input[type="text"] { width: 100%; padding: 5px; background: #333; border: 1px solid #555; color: white; border-radius: 4px; box-sizing: border-box; }
        .control span { font-family: monospace; min-width: 50px; text-align: right; background: #111; padding: 2px 5px; border-radius: 3px; font-size: 0.9em; }
        button#save-css-btn { width: 100%; padding: 15px; font-size: 1.2em; background-color: #a48042; color: black; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: auto; }
        button#save-css-btn:hover { background-color: #ffd700; }
        
        /* Estilos do campo de batalha (preview) */
        #field { 
            grid-area: main-field; display: flex; flex-direction: column; justify-content: space-between; position: relative; background: rgba(0, 0, 0, 0.1);
            width: var(--field-width); height: var(--field-height); gap: var(--field-gap); 
            padding: var(--field-padding-vertical) var(--field-padding-horizontal);
            border-radius: var(--field-border-radius);
            margin: auto; /* Centraliza o campo se ele tiver tamanho fixo */
        }
        .tabuleiro { display: flex; align-items: center; justify-content: center; padding: 5px 0; position: relative; transition: transform 0.1s ease; }
        .tabuleiro.oponente { transform: translateY(var(--tabuleiro-oponente-y)); }
        .tabuleiro.jogador { transform: translateY(var(--tabuleiro-jogador-y)); }

        .mao { display: flex; justify-content: center; align-items: center; position: relative; z-index: 50; padding: 0 20px; height: var(--mao-height); }
        #mao-jogador { transform: translateY(var(--mao-jogador-y)); }
        #mao-oponente { transform: translateY(var(--mao-oponente-y)); }
        .mao .card-container { width: var(--mao-card-width); margin: 0 var(--mao-card-margin); }
        .lado-jogador { display: grid; grid-template-areas: "vazio1 u1 u2 u3 stats" "cemiterio s1 g s2 deck"; grid-template-columns: repeat(5, auto); gap: var(--lado-jogador-gap); width: auto; max-width: var(--lado-jogador-max-width); padding: 0; align-items: center; justify-items: center; justify-content: center; }
        .lado-jogador.oponente { grid-template-areas: "deck s2 g s1 cemiterio" "stats u3 u2 u1 vazio1"; }
        .zona { border: 2px solid var(--cor-borda-painel-transparente); border-radius: 6px; position: relative; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.2); width: var(--field-card-width); height: var(--field-card-height); }
        .zona.general { border-width: 3px; border-style: double; }
        .general-stats-display { display: flex; flex-direction: column; justify-content: center; gap: 4px; background-color: var(--cor-painel-transparente); padding: 8px; border-radius: 6px; border: 1px solid var(--cor-borda-painel-transparente); color: white; font-weight: bold; align-self: center; width: var(--field-card-width); height: var(--field-card-height); font-size: var(--stats-font-size); }
        .stat-item { display: flex; align-items: center; gap: 5px; transform: scale(0.8); }
        #area-de-conflito { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; align-items: center; min-height: 100px; padding: 10px; border-top: 2px solid var(--cor-borda-painel); border-bottom: 2px solid var(--cor-borda-painel); background: rgba(20, 20, 20, 0.6); border-radius: 8px; margin: 5px 0;
            position: relative; transition: transform 0.1s ease;
            transform: translateY(var(--area-conflito-y));
        }
        #area-de-conflito .card-container { 
            width: var(--field-card-width);
            aspect-ratio: 63 / 88;
        }
        #oponente-cemiterio, #jogador-cemiterio { grid-area: cemiterio; } #oponente-s1, #jogador-s1 { grid-area: s1; } #oponente-g, #jogador-g { grid-area: g; } #oponente-s2, #jogador-s2 { grid-area: s2; } #oponente-deck, #jogador-deck { grid-area: deck; } #oponente-u1, #jogador-u1 { grid-area: u1; } #oponente-u2, #jogador-u2 { grid-area: u2; } #oponente-u3, #jogador-u3 { grid-area: u3; } #oponente-stats-display, #jogador-stats-display { grid-area: stats; }
    </style>
</head>
<body>

    <div class="game-screen-editor">
        <div class="game-ui-panel left-panel">
            <div class="control-group">
                <h3>Tabuleiro Principal (#field)</h3>
                <div class="control">
                    <label for="field-width">Largura do Tabuleiro (CSS)</label>
                    <input type="text" id="field-width" value="auto">
                </div>
                <div class="control">
                    <label for="field-height">Altura do Tabuleiro (CSS)</label>
                    <input type="text" id="field-height" value="auto">
                </div>
                 <div class="control">
                    <div class="control-inline"><label for="field-gap">Espaçamento Entre Seções</label><span id="field-gap-value">5px</span></div>
                    <input type="range" id="field-gap" min="0" max="30" value="5">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="field-padding-vertical">Espaçamento Vertical</label><span id="field-padding-vertical-value">10px</span></div>
                    <input type="range" id="field-padding-vertical" min="0" max="100" value="10">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="field-padding-horizontal">Espaçamento Horizontal</label><span id="field-padding-horizontal-value">10px</span></div>
                    <input type="range" id="field-padding-horizontal" min="0" max="300" value="10">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="field-border-radius">Arredondamento da Borda</label><span id="field-border-radius-value">12px</span></div>
                    <input type="range" id="field-border-radius" min="0" max="30" value="12">
                </div>
            </div>
             <div class="control-group">
                <h3>Cartas no Campo & Zonas</h3>
                <div class="control">
                    <div class="control-inline"><label for="field-card-width">Tamanho da Carta</label><span id="field-card-width-value">68px</span></div>
                    <input type="range" id="field-card-width" min="50" max="150" value="68">
                </div>
                 <div class="control">
                    <div class="control-inline"><label for="lado-jogador-gap">Espaço entre Zonas</label><span id="lado-jogador-gap-value">5px</span></div>
                    <input type="range" id="lado-jogador-gap" min="2" max="20" value="5">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="lado-jogador-max-width">Largura Máx. do Tabuleiro</label><span id="lado-jogador-max-width-value">450px</span></div>
                    <input type="range" id="lado-jogador-max-width" min="300" max="800" value="450">
                </div>
                 <div class="control">
                    <div class="control-inline"><label for="stats-font-size">Fonte dos Stats</label><span id="stats-font-size-value">1em</span></div>
                    <input type="range" id="stats-font-size" min="0.5" max="1.5" step="0.1" value="1">
                </div>
            </div>
        </div>

        <div id="field">
            <div id="mao-oponente" class="mao">
                 <div class="card-container"><div class="carta nacao-kragmar"><div class="carta-verso-jogo"></div></div></div>
                 <div class="card-container"><div class="carta nacao-kragmar"><div class="carta-verso-jogo"></div></div></div>
                 <div class="card-container"><div class="carta nacao-kragmar"><div class="carta-verso-jogo"></div></div></div>
            </div>
            <div class="tabuleiro oponente">
                <div class="lado-jogador oponente">
                    <div id="oponente-deck" class="zona"><div class="card-container"><div class="carta nacao-kragmar"><div class="carta-verso-jogo"></div></div></div></div>
                    <div id="oponente-s2" class="zona"></div>
                    <div id="oponente-g" class="zona general"><div class="card-container"><div class="carta tipo-general nacao-kragmar"></div></div></div>
                    <div id="oponente-s1" class="zona"></div>
                    <div id="oponente-cemiterio" class="zona cemiterio"></div>
                    <div id="oponente-stats-display" class="general-stats-display"><div class="stat-item">❤️ <span>28</span></div><div class="stat-item">⭐ <span>1</span></div></div>
                    <div id="oponente-u3" class="zona"></div>
                    <div id="oponente-u2" class="zona"><div class="card-container"><div class="carta tipo-unidade nacao-kragmar"></div></div></div>
                    <div id="oponente-u1" class="zona"></div>
                </div>
            </div>
            <div id="area-de-conflito">
                <div class="card-container"><div class="carta tipo-unidade nacao-aethel"></div></div>
                <div class="card-container"><div class="carta tipo-unidade nacao-kragmar"></div></div>
            </div>
            <div class="tabuleiro jogador">
                <div class="lado-jogador jogador">
                    <div id="jogador-u1" class="zona"><div class="card-container"><div class="carta tipo-unidade nacao-aethel"></div></div></div>
                    <div id="jogador-u2" class="zona"></div>
                    <div id="jogador-u3" class="zona"></div>
                     <div id="jogador-stats-display" class="general-stats-display"><div class="stat-item">❤️ <span>30</span></div><div class="stat-item">⭐ <span>1</span></div></div>
                    <div id="jogador-cemiterio" class="zona cemiterio"></div>
                    <div id="jogador-s1" class="zona"><div class="card-container"><div class="carta tipo-suporte nacao-aethel"></div></div></div>
                    <div id="jogador-g" class="zona general"><div class="card-container"><div class="carta tipo-general nacao-aethel"></div></div></div>
                    <div id="jogador-s2" class="zona"></div>
                    <div id="jogador-deck" class="zona"><div class="card-container"><div class="carta nacao-aethel"><div class="carta-verso-jogo"></div></div></div></div>
                </div>
            </div>
            <div id="mao-jogador" class="mao">
                 <div class="card-container"><div class="carta tipo-unidade nacao-aethel"></div></div>
                 <div class="card-container"><div class="carta tipo-unidade nacao-aethel"></div></div>
                 <div class="card-container"><div class="carta tipo-unidade nacao-aethel"></div></div>
                 <div class="card-container"><div class="carta tipo-unidade nacao-aethel"></div></div>
            </div>
        </div>

        <div class="game-ui-panel right-panel">
             <div class="control-group">
                <h3>Mão do Jogador</h3>
                <div class="control">
                    <div class="control-inline"><label for="mao-height">Altura da Área da Mão</label><span id="mao-height-value">100px</span></div>
                    <input type="range" id="mao-height" min="80" max="200" value="100">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="mao-card-width">Largura da Carta na Mão</label><span id="mao-card-width-value">60px</span></div>
                    <input type="range" id="mao-card-width" min="40" max="120" value="60">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="mao-card-margin">Sobreposição das Cartas</label><span id="mao-card-margin-value">-25px</span></div>
                    <input type="range" id="mao-card-margin" min="-60" max="10" value="-25">
                </div>
                 <div class="control">
                    <div class="control-inline"><label for="mao-jogador-y">Posição Vertical (Sua Mão)</label><span id="mao-jogador-y-value">0px</span></div>
                    <input type="range" id="mao-jogador-y" min="-500" max="200" value="0">
                </div>
                 <div class="control">
                    <div class="control-inline"><label for="mao-oponente-y">Posição Vertical (Mão Oponente)</label><span id="mao-oponente-y-value">0px</span></div>
                    <input type="range" id="mao-oponente-y" min="-200" max="200" value="0">
                </div>
            </div>
             <div class="control-group">
                <h3>Posicionamento Vertical das Seções</h3>
                <div class="control">
                    <div class="control-inline"><label for="tabuleiro-oponente-y">Tabuleiro do Oponente</label><span id="tabuleiro-oponente-y-value">0px</span></div>
                    <input type="range" id="tabuleiro-oponente-y" min="-300" max="100" value="0">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="area-conflito-y">Zona de Conflito</label><span id="area-conflito-y-value">0px</span></div>
                    <input type="range" id="area-conflito-y" min="-300" max="100" value="0">
                </div>
                <div class="control">
                    <div class="control-inline"><label for="tabuleiro-jogador-y">Seu Tabuleiro</label><span id="tabuleiro-jogador-y-value">0px</span></div>
                    <input type="range" id="tabuleiro-jogador-y" min="-300" max="100" value="0">
                </div>
            </div>
            <button id="save-css-btn">Salvar e Baixar game.css</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const root = document.documentElement;
            const CARD_ASPECT_RATIO = 88 / 63;

            const controls = {
                'field-width': { property: '--field-width', suffix: '' },
                'field-height': { property: '--field-height', suffix: '' },
                'field-gap': { property: '--field-gap', suffix: 'px' },
                'field-padding-vertical': { property: '--field-padding-vertical', suffix: 'px' },
                'field-padding-horizontal': { property: '--field-padding-horizontal', suffix: 'px' },
                'field-border-radius': { property: '--field-border-radius', suffix: 'px' },
                'field-card-width': { property: '--field-card-width', suffix: 'px' },
                'lado-jogador-gap': { property: '--lado-jogador-gap', suffix: 'px' },
                'lado-jogador-max-width': { property: '--lado-jogador-max-width', suffix: 'px' },
                'mao-height': { property: '--mao-height', suffix: 'px' },
                'mao-card-width': { property: '--mao-card-width', suffix: 'px' },
                'mao-card-margin': { property: '--mao-card-margin', suffix: 'px' },
                'mao-jogador-y': { property: '--mao-jogador-y', suffix: 'px' },
                'mao-oponente-y': { property: '--mao-oponente-y', suffix: 'px' },
                'stats-font-size': { property: '--stats-font-size', suffix: 'em' },
                'tabuleiro-oponente-y': { property: '--tabuleiro-oponente-y', suffix: 'px' },
                'area-conflito-y': { property: '--area-conflito-y', suffix: 'px' },
                'tabuleiro-jogador-y': { property: '--tabuleiro-jogador-y', suffix: 'px' }
            };

            for (const id in controls) {
                const input = document.getElementById(id);
                if (!input) continue;

                const valueLabel = document.getElementById(`${id}-value`);
                const { property, suffix } = controls[id];

                input.addEventListener('input', (e) => {
                    let value = e.target.value;
                    root.style.setProperty(property, value + suffix);
                    
                    if (id === 'field-card-width') {
                        const height = Math.round(value * CARD_ASPECT_RATIO);
                        root.style.setProperty('--field-card-height', height + 'px');
                    }
                    
                    if (valueLabel) {
                        valueLabel.textContent = value + (suffix || '');
                    }
                });
            }

            // Lógica para salvar o CSS
            document.querySelectorAll('#save-css-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const getStyleValue = (id) => document.getElementById(id).value + (controls[id]?.suffix || '');
                    
                    const fieldCardWidthPx = document.getElementById('field-card-width').value;
                    const fieldCardHeightPx = Math.round(fieldCardWidthPx * CARD_ASPECT_RATIO) + 'px';
                    const fieldCardWidth = fieldCardWidthPx + 'px';
                    const paddingValue = `${getStyleValue('field-padding-vertical')} ${getStyleValue('field-padding-horizontal')}`;

                    let cssTemplate = `/* CSS Gerado pelo Editor de Campo */

:root {
    --cor-borda-painel: #a48042;
    --cor-destaque: #ffd700;
    --cor-painel: rgba(20,20,20,0.85);
    --cor-painel-transparente: rgba(20,20,20,0.7);
    --cor-borda-painel-transparente: rgba(84,68,33,0.6);
    --glow-color-jogador: rgba(0, 150, 255, 0.8);
    --glow-color-oponente: rgba(255, 80, 80, 0.8);
    --glow-branco-sutil: 0 0 8px rgba(255, 255, 255, 0.3);
}

* { 
    box-sizing: border-box; 
}

/* ===== LAYOUT PRINCIPAL DO JOGO ===== */
#game-screen { 
    display: grid; 
    grid-template-areas: "left-panel main-field right-panel"; 
    grid-template-columns: clamp(200px, 15vw, 280px) minmax(0, 1fr) clamp(200px, 15vw, 280px); 
    grid-template-rows: 100%; 
    width: 100vw; 
    height: 100vh; 
    padding: 10px; 
    gap: 10px; 
    overflow: hidden;
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    position: relative;
}

/* ===== CAMPO PRINCIPAL ===== */
#field { 
    grid-area: main-field; 
    display: flex; 
    flex-direction: column; 
    justify-content: space-between; 
    position: relative;
    background: rgba(0, 0, 0, 0.1);
    width: ${getStyleValue('field-width')};
    height: ${getStyleValue('field-height')};
    gap: ${getStyleValue('field-gap')};
    padding: ${paddingValue};
    border-radius: ${getStyleValue('field-border-radius')};
    margin: auto;
}

/* ===== PAINÉIS LATERAIS ===== */
.game-ui-panel { 
    display: flex; 
    flex-direction: column; 
    gap: 15px; 
    padding: 15px; 
    background: var(--cor-painel); 
    backdrop-filter: blur(8px); 
    border: 2px solid var(--cor-borda-painel); 
    border-radius: 12px; 
    height: 100%;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.left-panel { grid-area: left-panel; }
.right-panel { grid-area: right-panel; }

/* ===== PLACAR DA PARTIDA ===== */
.match-score {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    font-size: 1.5em;
    font-weight: bold;
    color: var(--cor-destaque);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    padding: 8px;
    background: var(--cor-painel-transparente);
    border-radius: 8px;
    border: 1px solid var(--cor-borda-painel-transparente);
    margin-top: 15px;
}
.match-score span { min-width: 25px; text-align: center; }

/* ===== PREVIEW DE CARTA NO JOGO ===== */
#game-card-preview { flex: 1 1 50%; display: flex; flex-direction: column; gap: 10px; min-height: 0; }
#game-card-preview-display { width: 100%; aspect-ratio: 63 / 88; background: rgba(0,0,0,0.5); border-radius: 8px; border: 2px dashed var(--cor-borda-painel-transparente); transition: all 0.3s ease; flex-shrink: 0; }
#game-card-preview-display:not(:empty) { border: 2px solid var(--cor-borda-painel); box-shadow: var(--glow-branco-sutil); }
#game-card-preview-content { overflow-y: auto; flex-grow: 1; background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; font-size: 0.9em; line-height: 1.4; height: 200px; }
#game-card-preview-content h3 { font-size: 1.0em; color: var(--cor-destaque); margin: 0 0 8px; font-family: 'Lora', serif; }
#game-card-preview-content p { margin: 0 0 6px; }
#game-card-preview-content hr { border: none; border-top: 1px solid rgba(255, 255, 255, 0.2); margin: 8px 0; }

/* ===== LOG DO JOGO ===== */
.game-log-container { flex: 1 1 40%; display: flex; flex-direction: column; min-height: 0; }
.game-log-container h3 { color: var(--cor-destaque); font-family: 'Lora', serif; margin: 0 0 10px; text-align: center; }
.game-log { overflow-y: auto; flex-grow: 1; padding: 10px; font-size: 0.85em; background: rgba(0,0,0,0.4); border-radius: 6px; border: 1px solid var(--cor-borda-painel-transparente); }
.game-log p { margin: 0 0 6px; padding: 4px; border-radius: 3px; }
.game-log p:nth-child(even) { background: rgba(255, 255, 255, 0.05); }
.game-log strong { color: var(--cor-destaque); }

/* ===== MÃOS DOS JOGADORES ===== */
.mao { display: flex; justify-content: center; align-items: center; position: relative; z-index: 50; padding: 0 20px; height: ${getStyleValue('mao-height')}; }
#mao-oponente { transform: translateY(${getStyleValue('mao-oponente-y')}); }
#mao-jogador { transform: translateY(${getStyleValue('mao-jogador-y')}); }
.mao .card-container { width: ${getStyleValue('mao-card-width')}; transition: transform 0.2s ease, z-index 0s ease 0.1s, margin 0.2s ease; margin: 0 ${getStyleValue('mao-card-margin')}; }
.mao .card-container:hover { transform: translateY(-15px) scale(1.1); z-index: 100; margin: 0 5px; }
#mao-oponente .card-container { transform: rotate(180deg); }
#mao-oponente .card-container:hover { transform: translateY(15px) scale(1.1) rotate(180deg); }

/* ===== TABULEIRO DE JOGO ===== */
.tabuleiro { display: flex; align-items: center; justify-content: center; padding: 5px 0; position: relative; transition: transform 0.1s ease;}
.tabuleiro.oponente { transform: translateY(${getStyleValue('tabuleiro-oponente-y')}); }
.tabuleiro.jogador { transform: translateY(${getStyleValue('tabuleiro-jogador-y')}); }
.lado-jogador { display: grid; grid-template-areas: "vazio1 u1 u2 u3 stats" "cemiterio s1 g s2 deck"; grid-template-columns: repeat(5, auto); gap: ${getStyleValue('lado-jogador-gap')}; width: auto; max-width: ${getStyleValue('lado-jogador-max-width')}; padding: 0; align-items: center; justify-items: center; justify-content: center; }
.lado-jogador.oponente { grid-template-areas: "deck s2 g s1 cemiterio" "stats u3 u2 u1 vazio1"; }
.lado-jogador.oponente .card-container { transform: none; }
.lado-jogador.oponente .card-container .carta { transform: rotate(180deg); }
#oponente-cemiterio, #jogador-cemiterio { grid-area: cemiterio; }
#oponente-s1, #jogador-s1 { grid-area: s1; }
#oponente-g, #jogador-g { grid-area: g; }
#oponente-s2, #jogador-s2 { grid-area: s2; }
#oponente-deck, #jogador-deck { grid-area: deck; }
#oponente-u1, #jogador-u1 { grid-area: u1; }
#oponente-u2, #jogador-u2 { grid-area: u2; }
#oponente-u3, #jogador-u3 { grid-area: u3; }
#oponente-vazio1, #jogador-vazio1 { grid-area: vazio1; }
#oponente-stats-display, #jogador-stats-display { grid-area: stats; }
.zona-vazia { opacity: 0; pointer-events: none; border: none !important; background: transparent !important; }
.zona { border: 2px solid var(--cor-borda-painel-transparente); border-radius: 6px; position: relative; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.2); transition: all 0.3s ease; width: ${fieldCardWidth}; height: ${fieldCardHeightPx}; }
.zona .card-container { width: 100% !important; height: 100% !important; max-width: none !important; }
.zona .carta { font-size: 3px !important; width: 100%; height: 100%; }
.zona:hover { background: rgba(0,0,0,0.3); }
.zona.cemiterio { background-color: rgba(10, 0, 0, 0.4); cursor: pointer; }
.zona.cemiterio:hover { border-color: var(--cor-destaque); box-shadow: 0 0 10px var(--cor-destaque); }
.zona.general { border-width: 3px; border-style: double; box-shadow: 0 0 10px rgba(164, 128, 66, 0.5); }
.arrastando { z-index: 1001; position: fixed; pointer-events: none; width: 60px; transform: rotate(5deg); filter: brightness(1.2); }
.count-in-zone { position: absolute; bottom: 2px; right: 4px; background: rgba(0,0,0,0.8); color: white; padding: 2px 6px; border-radius: 12px; font-size: 0.8em; font-weight: bold; border: 1px solid var(--cor-borda-painel); min-width: 18px; text-align: center; }
#area-de-conflito { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; align-items: center; min-height: 100px; padding: 10px; border-top: 2px solid var(--cor-borda-painel); border-bottom: 2px solid var(--cor-borda-painel); background: rgba(20, 20, 20, 0.6); border-radius: 8px; margin: 5px 0; position: relative; transition: transform 0.1s ease; transform: translateY(${getStyleValue('area-conflito-y')}); }
#area-de-conflito:empty::after { content: "Zona de Conflito"; color: var(--cor-borda-painel-transparente); font-style: italic; font-size: 0.9em; }
#area-de-conflito .card-container { width: ${fieldCardWidth}; flex: 0 0 auto; aspect-ratio: 63 / 88; }
#phase-track { display: flex; justify-content: space-around; background: var(--cor-painel-transparente); padding: 8px; border-radius: 25px; border: 2px solid var(--cor-borda-painel-transparente); margin-bottom: 10px; }
.phase-orb { padding: 8px 6px; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; background: rgba(60, 60, 60, 0.7); color: #e0e0e0; font-weight: bold; font-size: 0.8em; cursor: pointer; transition: all 0.3s ease; text-align: center; border: 2px solid transparent; }
.phase-orb.clickable { border-color: rgba(255, 255, 255, 0.3); }
.phase-orb.clickable:hover { background: rgba(90, 90, 90, 0.9); transform: scale(1.1); }
.phase-orb.active.jogador { background: var(--glow-color-jogador); color: #1a1a1a; box-shadow: 0 0 15px var(--glow-color-jogador); border-color: rgba(0, 150, 255, 0.5); animation: active-phase 2s ease-in-out infinite alternate; }
.phase-orb.active.oponente { background: var(--glow-color-oponente); color: #1a1a1a; box-shadow: 0 0 15px var(--glow-color-oponente); border-color: rgba(255, 80, 80, 0.5); animation: active-phase 2s ease-in-out infinite alternate; }
@keyframes active-phase { from { transform: scale(1); } to { transform: scale(1.05); } }
.menu-buttons { display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; }
.menu-button { padding: 12px 16px; font-size: 1em; background: linear-gradient(135deg, #4f4f4f 0%, #3a3a3a 100%); color: #e0e0e0; border: 2px solid var(--cor-borda-painel); border-radius: 8px; cursor: pointer; font-weight: bold; text-align: center; transition: all 0.3s ease; font-family: 'Lora', serif; }
.menu-button:hover:not(:disabled) { background: linear-gradient(135deg, #6f6f6f 0%, #5a5a5a 100%); border-color: var(--cor-destaque); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
.menu-button:disabled { cursor: not-allowed; background: #2a2a2a; color: #666; border-color: #444; }
.menu-button.turn-button { background: linear-gradient(135deg, #00561b 0%, #004214 100%); border-color: #007a27; }
.menu-button.turn-button:hover:not(:disabled) { background: linear-gradient(135deg, #007a27 0%, #00561b 100%); }
.menu-button.defeat-button { background: linear-gradient(135deg, #8b0000 0%, #660000 100%); border-color: #aa0000; margin-top: auto; }
.menu-button.defeat-button:hover { background: linear-gradient(135deg, #aa0000 0%, #880000 100%); }
.chat-container { display: flex; flex-direction: column; flex-grow: 1; min-height: 0; }
.chat-container h3 { color: var(--cor-destaque); font-family: 'Lora', serif; margin: 0 0 10px; text-align: center; }
.chat-messages { overflow-y: auto; flex-grow: 1; background: rgba(0,0,0,0.4); padding: 10px; border-radius: 6px; border: 1px solid var(--cor-borda-painel-transparente); font-size: 0.9em; }
.chat-messages p { margin: 0 0 5px; padding: 3px; border-radius: 3px; }
.chat-messages p:nth-child(even) { background: rgba(255, 255, 255, 0.05); }
.chat-input-area { display: flex; margin-top: 10px; margin-bottom: 10px; gap: 5px; }
#chat-input { flex-grow: 1; background: rgba(30,30,30,0.8); border: 2px solid var(--cor-borda-painel-transparente); color: #e0e0e0; padding: 8px; border-radius: 6px; transition: border-color 0.3s ease; font-family: 'Roboto', sans-serif; }
#chat-input:focus { outline: none; border-color: var(--cor-borda-painel); }
#chat-send-btn { padding: 8px 12px; background: var(--cor-borda-painel); border: none; border-radius: 6px; color: #1a1a1a; font-weight: bold; cursor: pointer; }
#chat-send-btn:hover { background: var(--cor-destaque); }
.overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.overlay.hidden { display: none; }
.general-stats-display { display: flex; flex-direction: column; justify-content: center; gap: 4px; background-color: var(--cor-painel-transparente); padding: 8px; border-radius: 6px; border: 1px solid var(--cor-borda-painel-transparente); color: white; font-weight: bold; align-self: center; width: ${fieldCardWidth}; height: ${fieldCardHeightPx}; font-size: ${getStyleValue('stats-font-size')}; }
.stat-item { display: flex; align-items: center; gap: 5px; }
.stat-item .stat-vida { color: lightgreen; }
.stat-item .stat-xp { color: var(--cor-destaque); }
.card-clone { position: fixed; z-index: 2000; pointer-events: none; transition: all 0.5s cubic-bezier(0.65, 0, 0.35, 1); }
.atacante-valido .carta { box-shadow: 0 0 15px 3px var(--glow-color-jogador) !important; }
.atacante-selecionado .carta { box-shadow: 0 0 15px 3px gold !important; }
.alvo-valido .carta { box-shadow: 0 0 15px 3px var(--glow-color-oponente) !important; }
#dice-roll-overlay .overlay-content { background: var(--cor-painel); border: 3px solid var(--cor-borda-painel); border-radius: 15px; padding: 40px; text-align: center; width: 90%; max-width: 500px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); }
#dice-roll-title { font-size: 1.8em; color: var(--cor-destaque); margin-bottom: 30px; font-family: 'Lora', serif; }
.dice-container { display: flex; justify-content: space-around; align-items: center; }
.dice-player { display: flex; flex-direction: column; align-items: center; gap: 15px; }
.dice-player-name { font-size: 1.2em; }
.dice-result { font-size: 3em; font-weight: bold; padding: 20px; border: 2px solid var(--cor-borda-painel-transparente); border-radius: 10px; min-width: 80px; background: rgba(0,0,0,0.3); }
@keyframes ability-glow { 0% { box-shadow: 0 0 5px rgba(255, 255, 100, 0.5); } 50% { box-shadow: 0 0 25px 5px rgba(255, 255, 100, 1); } 100% { box-shadow: 0 0 5px rgba(255, 255, 100, 0.5); } }
.card-container.ability-activated .carta { animation: ability-glow 1s ease-in-out; }
`;
                    
                    const blob = new Blob([cssTemplate.trim()], { type: 'text/css' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'game.css';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
            });
        });
    </script>
</body>
</html>